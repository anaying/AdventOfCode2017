package year2025;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.Scanner;

public class Day7 {
    private static final String input = """
            ......................................................................S......................................................................
            .............................................................................................................................................
            ......................................................................^......................................................................
            .............................................................................................................................................
            .....................................................................^.^.....................................................................
            .............................................................................................................................................
            ....................................................................^...^....................................................................
            .............................................................................................................................................
            ...................................................................^...^.^...................................................................
            .............................................................................................................................................
            ..................................................................^.^.^.^.^..................................................................
            .............................................................................................................................................
            .................................................................^.^.^.^.^.^.................................................................
            .............................................................................................................................................
            ................................................................^.^.......^.^................................................................
            .............................................................................................................................................
            ...............................................................^.....^.....^.^...............................................................
            .............................................................................................................................................
            ..............................................................^.^.........^...^..............................................................
            .............................................................................................................................................
            .............................................................^.^...^.....^.^.^.^.............................................................
            .............................................................................................................................................
            ............................................................^.^.^.....^.^.^...^.^............................................................
            .............................................................................................................................................
            ...........................................................^.^.....^...^...^.^.^.^...........................................................
            .............................................................................................................................................
            ..........................................................^.^.^.^.^.^...^.......^.^..........................................................
            .............................................................................................................................................
            .........................................................^.^.^...^.^...^.^.^.....^.^.........................................................
            .............................................................................................................................................
            ........................................................^.^.^...^.^.^.....^.^.^.^...^........................................................
            .............................................................................................................................................
            .......................................................^...^.^...^.^.^.^.^.^.^...^.^.^.......................................................
            .............................................................................................................................................
            ......................................................^.^.....^.....^.^...^.^.^.^.....^......................................................
            .............................................................................................................................................
            .....................................................^.....^.^.^.^...^.^.^.^.^.^.^.^.^.^.....................................................
            .............................................................................................................................................
            ....................................................^...^.^.^.^...^...^.^.^.^...^.^.....^....................................................
            .............................................................................................................................................
            ...................................................^.^...^.^.^...^.^.....^.^.^.^.^...^.^.^...................................................
            .............................................................................................................................................
            ..................................................^.......^...^.^.^.^.^.^.^.^.^.^.^.^.....^..................................................
            .............................................................................................................................................
            .................................................^...^...^...^.^.^.........^...^.^.....^.^.^.................................................
            .............................................................................................................................................
            ................................................^...^.^.....^.^.^...^.^.^.^.^.^.......^...^.^................................................
            .............................................................................................................................................
            ...............................................^.^...^...^.........^.^.^.^.^.^.....^.^.....^.^...............................................
            .............................................................................................................................................
            ..............................................^.^...^...^.^.^.^.^.^.^.^...^.^.^.^...^.^.^.....^..............................................
            .............................................................................................................................................
            .............................................^.^.^...^...^.^.^.^...^.^.^.^.^.^.^...^.^.^.^.^...^.............................................
            .............................................................................................................................................
            ............................................^...^.^.^.^.....^.^...^.^.^.^.^.....^.^.^...^.^.^...^............................................
            .............................................................................................................................................
            ...........................................^.^.^.......^.^.^...^...^...^...^.....^...^.^.^.^.....^...........................................
            .............................................................................................................................................
            ..........................................^...^.^.^.^.^...^.^.^.^.^.^...^.^...^.^.^...^.^.^...^.^.^..........................................
            .............................................................................................................................................
            .........................................^...^.^...^.^.......^...^.^...^.^...^.^.^.^.^.^.^.^.^...^.^.........................................
            .............................................................................................................................................
            ........................................^.^...^.^.........^.^.^.^.^.^.....^.^.^.....^.^.^.^.^...^...^........................................
            .............................................................................................................................................
            .......................................^.^.^.^...^.....^.^.^.^.^...^.^...^.^.^.^.^.^...^.^.^...^...^.^.......................................
            .............................................................................................................................................
            ......................................^.^.^.^.^.^.^.....^.^.^.^.^.^.^.^...^.....^.^.^...^.^.^.^.^.^.^.^......................................
            .............................................................................................................................................
            .....................................^.^.^.^.^.^.^.^...^.^...^.^.^.^...^.....^.^.^...^.^...^.^.^...^...^.....................................
            .............................................................................................................................................
            ....................................^.^.......^.^.^...^.^.^.^.^...^.^.^...^.^...^...^...^.....^.^.....^.^....................................
            .............................................................................................................................................
            ...................................^.^.^.^.^.^.....^.^.^.^.^.^.^...^.^...^...^.^.^...^.^.^.^...^.^...^...^...................................
            .............................................................................................................................................
            ..................................^.....^.^.^.^...^.^.^.^.^.^...^.^.......^...^.^.^.^.^...^.^.^...^...^...^..................................
            .............................................................................................................................................
            .................................^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.^.^...^...^.....^.^.^.^.^.^...^.^.....^.................................
            .............................................................................................................................................
            ................................^.^...^.^.^.^.^.^...^.^.^...^...^.^.^.^.^...^...^.....^.^.^.^.^.....^.....^.^................................
            .............................................................................................................................................
            ...............................^.....^.^.^.^.^.^...^.^.^.^...^.^...^.....^...^.....^...^...^.^...^.^.^...^.^.^...............................
            .............................................................................................................................................
            ..............................^.^.....^.^.^.^.^.^.^.^...^.^.^.^.^.^...^.^.....^.^.^...........^.^...^...^...^.^..............................
            .............................................................................................................................................
            .............................^...^.....^.^.^.^...^.....^.^.^.^.........^.^.^...^.^.^...^.^.^.^.^.^.^.^.^...^...^.............................
            .............................................................................................................................................
            ............................^.^.^...^.^.^.^...^.....^.^.^.^.^...^.^.^.^.^...^...^.^.^.^.^...^.^.^.^...^.^.^.^...^............................
            .............................................................................................................................................
            ...........................^.^.......^.....^.^.....^...^.^.^...^.^.^.^.^.^...^.^.^.^.^.^...^.^.^.^.......^.^.^...^...........................
            .............................................................................................................................................
            ..........................^.^.^.^.....^.^.^.......^...^.^...^...^.^.^.^.....^...^.^.^.^...^.^...^...^.^.^...^.^...^..........................
            .............................................................................................................................................
            .........................^...^...^.^.^.^...^...^.^.^.^...^.^.^.^.^...^.^.........^.^.^.^.^...^.^.^...^.....^.......^.........................
            .............................................................................................................................................
            ........................^.^...^.^.^.^.^.^.^...^.^.^...^.^.^...^.^.^.^.^.^.^.^.^.^.^...^.^...^.^.^.^.^.....^.^.^.....^........................
            .............................................................................................................................................
            .......................^.^.^.......^.^...^.^.^.^.^.^...^.......^.^.^.^.^...^...^.^...^.^.^.^.^.^.^.^...^.^...^.^.^...^.......................
            .............................................................................................................................................
            ......................^.^.^...^.^.^...^.^.^.^.^...^...^...^.^.^.^.^.^.^.^.^.^.^.^...^.....^.^...^.^.^.^.^.^.^.^.......^......................
            .............................................................................................................................................
            .....................^.^.^.^...^...^.^...^.^.^.^.^.^...^.^.^.....^.^...^.....^.^.^.^.....^.^.^.^.^.^.^.^.^.^.^.^.^.^...^.....................
            .............................................................................................................................................
            ....................^.^.^.^.^.^.^.^.^.^.........^.^.^...^.^.^.^.......^.^.^.^.^.....^.^.^.^.^.^.^.^.^.^.^...^...^.....^.^....................
            .............................................................................................................................................
            ...................^.^.^.^.^.^.^.....^.^.^.^.^.^.....^.^.....^.^.....^.^.........^...^...^.^...^.^...^.^.^.^.^.^.^.^.....^...................
            .............................................................................................................................................
            ..................^.....^...^.^.^.^...^.^.^.^.^.^...^.^.^.^.^.^.^.^.^.^.....^.......^...^...^.......^.^.^.^.^.^...^.^.....^..................
            .............................................................................................................................................
            .................^.^.^.^...^.^.^.^.........^.^.^.....^.^.^.^.......^...^.^...^...^.^.^.....^.^...^...^.^.^.....^.^...^.^.^.^.................
            .............................................................................................................................................
            ................^...^.^...^.^...^.^.^.^.^...^.^.........^...^.^.....^...^.^...^.^...^.^...^.^.^.^.^.^...^.^.^...^.^.^.^.^...^................
            .............................................................................................................................................
            ...............^.^.^.......^.^.^...^.^.^.^.^...^...^.^...^...^.^.^.^...^.^.^.^.^.^.^.^...^.^...^.....^...^.^...^.^.....^.^...^...............
            .............................................................................................................................................
            ..............^...^.....^.^.^.^.^.^...^...^.....^.^.^.^.^.^...^.^.^.^...^.^.^...^...^.^.^.......^...^.^...^.^.^.^.......^.^...^..............
            .............................................................................................................................................
            .............^...^...^.^...^.^.^.^.^.^...^...^.^.^.^.^.^.....^...^...^.....^...^.^.....^.^.^.^.^.^.^.^.^.^.^.....^.^.^.^.^.^...^.............
            .............................................................................................................................................
            ............^...^.^.^...^.^...^.^.^.^.^.......^.^.....^.....^.^.^.^.^...^.^.^.^...^.....^.^...^.^.^.^.^.^.^.^.^.^.^.^.^.....^.^.^............
            .............................................................................................................................................
            ...........^.^.^.....^.^.^.^.^.^.^.^...^.^.^...^.^.^.^.....^...^.^.^...^.^...^.^.^...^.^.^.^...^.^.^...^...^.^.^.^...^.....^.^.^.^...........
            .............................................................................................................................................
            ..........^.^.^.^...^.^...^...^...........^.^.^.^.^.^.^.^...^.^.^.^.^.^...........^.^.^...^.^.^.^.....^.^.^.^.^.^.^.^.^...^.^.^.^.^..........
            .............................................................................................................................................
            .........^.^.^.^...^.^...^...^...^.......^...^.^.....^.^.^.....^.^.^.^...^.^...^.^.^.^.....^.^.^.^.^...^.^...^.^...^.^...^.^...^.^.^.........
            .............................................................................................................................................
            ........^.^.....^.^.^.^...^.^.^.^.....^.^...^.^.^.^.....^.^.^.^.^.^.^.^...^.^.....^.^.....^.^.^.^.^.^.^.^.^.^.^.^.^...^...^.^.^.^...^........
            .............................................................................................................................................
            .......^.^.^.^.^.....^.....^.^.^.^.^...^...^...^...^.^.^.^.^.......^...^.^...^.^.^.^.^.^.^...^.^.^...^.^.^.^...^.^.^.^.^...^.^.^...^.^.......
            .............................................................................................................................................
            ......^.^.^.^.^...^.^.^...^.^.^.^.^.^.^.^...^.^...^.^.^...^.^.^.^.^.^...^.^.....^...^.^.^...^.^...^.....^.^.^.^.^.^.^.^.^.^.^.....^.^.^......
            .............................................................................................................................................
            .....^.^.^.^.^.^.^.^...^.^.^.......^.^.^.^...^.^.^.....^.^.....^.^...^.^.^...^.^.^.^.^.^.^.^.^.^...^.^.^...^.^.^.^.^.....^.^.^.^.^.^...^.....
            .............................................................................................................................................
            ....^...^.^.^.^.^.^.^...^.^.^...^.^.^.^...^.^.^.....^.^...^.^.^.^...^.^.^.....^.^.^.^.^.....^.^.^.^...^.^.^.^.^.^.^.^...^.^.^.^.^.^.^.^.^....
            .............................................................................................................................................
            ...^...^.......^.^...^.^.^.^...^.^.^.^.....^...^.^.......^.^.^.^.^.^.^.^...^.^.....^.^.^.^.^.^.^.^.....^.^...^...^.^.^.....^...^.......^.^...
            .............................................................................................................................................
            ..^.^.^...^.^.^.....^.^.^...^...^...^...^.^.^.^.^.^.^.....^.^.^...^.....^.^.^.^.^...^.^...^.^.^.^.^.^.^.^...^.^.^...^.^.^.^.^...^.^.^...^.^..
            .............................................................................................................................................
            .^.^.......^.^.^.^.^.^.^...^.....^.^...^.^.^.^.^.^...^...^.^...^.^.........^.....^.^.^.^.....^.^.^.^.^...^.^.^.^.^.^.^.^.^.^...^...^.^...^.^.
            .............................................................................................................................................""";
    private static final String tester = """
            .......S.......
            ...............
            .......^.......
            ...............
            ......^.^......
            ...............
            .....^.^.^.....
            ...............
            ....^.^...^....
            ...............
            ...^.^...^.^...
            ...............
            ..^...^.....^..
            ...............
            .^.^.^.^.^...^.
            ...............""";
    private static final String myTester = """
            ..S..
            ..^..
            .^...
            .....""";
//    private static ArrayList<boolean[]> diagram = new ArrayList<>();

    private static int part1() {
        int splits = 0;
        Scanner sc = new Scanner(input);
        char[] line = sc.nextLine().toCharArray();
        boolean[] manifold = new boolean[line.length];
        for (int i = 0; i < manifold.length; i++) {
            if (line[i] == 'S') {
                manifold[i] = true;
                break;
            }
        }
        while (sc.hasNextLine()) {
            line = sc.nextLine().toCharArray();
            for (int i = 0; i < line.length; i++) {
                if (manifold[i] && line[i] == '^') {
                    manifold[i] = false;
                    manifold[i - 1] = true;
                    manifold[i + 1] = true;
                    splits++;
                }
            }
        }
        sc.close();
        return splits;
    }

    private static long part2() {
        Scanner sc = new Scanner(input);
        char[] line = sc.nextLine().toCharArray();
        long[] manifold = new long[line.length];
        for (int i = 0; i < manifold.length; i++) {
            if (line[i] == 'S') {
                manifold[i] = 1;
                break;
            }
        }
        while (sc.hasNextLine()) {
            line = sc.nextLine().toCharArray();
            for (int i = 0; i < line.length; i++) {
                if (line[i] == '^' && manifold[i] != 0) {
                    manifold[i - 1] += manifold[i];
                    manifold[i + 1] += manifold[i];
                    manifold[i] = 0;
                }
            }
        }
        return Arrays.stream(manifold).sum();
    }

    public static void main(String[] args) {
        System.out.println("Solución 1: " + part1());
        System.out.println("Solución 2: " + part2());
    }
}
